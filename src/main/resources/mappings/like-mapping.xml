<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="LikeMapper">

	<!-- 게시글의 좋아요 카운트 -->
	<select id="postLikeCount" resultType = "int">
		select count(*) 
		  from likes 
		 where post_seq = #{post_Seq}
		   and reply_seq = 0
	</select>


	<!-- 게시글 좋아요를 눌렀는지 확인하기 위한 조회 -->
	<!-- 좋아요가 눌려있으면 1 반환, 안눌려있으면 0반환 -->
	<select id="postCheckLike" resultType = "int">
		select case when count(*) > 0 then 1 else 0 end as result
		from likes
		where member_id = #{member_Id} 
		and   post_seq = #{post_Seq}
	</select>
	
	<!-- 좋아요 +1 -->
	<insert id="postInsertLike">
		insert into likes (member_id, post_seq)
			values (#{member_Id}, #{post_Seq})
	</insert>
	
	<!-- 좋아요 -1 -->
	<delete id="postDeleteLike">
		delete from likes where member_id = #{member_id}
						 and post_seq = #{post_Seq}
	</delete>


	<!-- 댓글 좋아요를 눌렀는지 확인하기 위한 조회 -->
	<!-- 좋아요가 눌려있으면 1 반환, 안눌려있으면 0반환 -->
	<select id="replyCheckLike">
		select case when count(*) > 0 then 1 else 0 end as result
		from like
		where member_id = #{member_Id} 
		and  reply_seq = #{reply_Seq}
	</select>
	
	<!-- 좋아요 +1 -->
	<insert id="replyInsertLike">
		insert into like (member_id, reply_seq)
			values (#{member_Id}, #{reply_Seq})
	</insert>
	
	<!-- 좋아요 -1 -->
	<delete id="replyDeleteLike">
		delete from like where member_id = #{member_id}
						 and reply_seq = #{reply_Seq}
	</delete>

</mapper>
